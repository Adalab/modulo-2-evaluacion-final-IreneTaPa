"use strict";const ulElement=document.querySelector(".js_list"),ulFavorites=document.querySelector(".js_fav-list"),searchInput=document.querySelector(".js_searchInput"),searchButton=document.querySelector(".js_searchBtn"),urlMoreCharacters="https://api.disneyapi.dev/character";let listCharacters=[],listCharactersFav=[];function renderAllCharacters(e){ulElement.innerHTML="";for(const r of e)ulElement.innerHTML+=renderCharacter(r)}function renderCharacter(e){const r=parseInt(e._id),t=listCharactersFav.findIndex(e=>e._id===r);return console.log(t),-1!==t?`<li id="${e._id}" class="list_items list_fav js_li-characters"><img class="image" src="${e.imageUrl}"><p> ${e.name}</p></li>`:`<li id="${e._id}" class="list_items js_li-characters"><img class="image" src="${e.imageUrl}"><p> ${e.name}</p></li>`}const favoritesLS=JSON.parse(localStorage.getItem("favoritesList"));function fetchCharacters(){fetch(urlMoreCharacters).then(e=>e.json()).then(e=>{listCharacters=e.data,renderAllCharacters(listCharacters),clickEventFavoriteCharacter()}).catch(e=>{console.error(e)})}function renderFavCharacterList(){ulFavorites.innerHTML="";for(const e of listCharactersFav)ulFavorites.innerHTML+=renderCharacter(e),console.log(e);localStorage.setItem("favoritesList",JSON.stringify(listCharactersFav))}function clickEventFavoriteCharacter(){const e=document.querySelectorAll(".js_li-characters");for(const r of e)r.addEventListener("click",handleClick)}function handleClick(e){const r=parseInt(e.currentTarget.id),t=listCharacters.find(e=>e._id===r);console.log(t);const a=listCharactersFav.findIndex(e=>e._id===r);console.log(a),-1===a?listCharactersFav.push(t):listCharactersFav.splice(a,1),console.log(listCharactersFav),renderFavCharacterList()}function searchCharacters(e){e.preventDefault(),console.log("he clickado el buscador");const r=searchInput.value;console.log(r);const t=listCharacters.filter(e=>e.name.toLowerCase().includes(r.toLowerCase()));console.log(t),renderAllCharacters(t)}null!==favoritesLS&&(listCharactersFav=favoritesLS,renderFavCharacterList()),fetchCharacters(),searchButton.addEventListener("click",searchCharacters);